(this.webpackJsonpterritories=this.webpackJsonpterritories||[]).push([[8],{445:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),o=a(19),l=a.n(o),i=a(314),c=a(322),m=a(32),s=a(35),u=a(34),p=a(33),h=a(57),d=a(64),g=a(60),f=a(16),y=a(12),E=a(421),v=a.n(E).a;function b(){var e=Object(f.a)(["\n  && {\n    min-width: 250px;\n  }\n"]);return b=function(){return e},e}var C=Object(y.c)(v)(b()),k=function(e){Object(u.a)(a,e);var n=Object(p.a)(a);function a(e){var t;return Object(m.a)(this,a),(t=n.call(this,e)).handlePlayerNameChange=function(e){var n=e.target.value;t.setState({changingPlayerName:n})},t.handleLogin=function(){t.props.onLogin(t.state.changingPlayerName)},t.getErrorMessage=function(e,n){return e?/^\w+$/.test(e)?e.length>15?l.a.get("online.name_too_long"):n.includes(e)?l.a.get("online.name_taken"):null:l.a.get("online.name_invalid_characters"):l.a.get("online.name_not_empty")},t.state={changingPlayerName:e.playerName},t}return Object(s.a)(a,[{key:"render",value:function(){var e=this,n=this.state.changingPlayerName,a=this.props.playersNames,t=this.getErrorMessage(n,a),o=!!t;return r.a.createElement(g.a,{column:!0,alignItems:"center"},r.a.createElement(g.b,null,r.a.createElement(C,{label:l.a.get("online.enter_name"),error:o,helperText:t,margin:"normal",value:n,variant:"outlined",onKeyPress:function(n){var a=n.key;return!o&&"Enter"===a&&e.handleLogin()},onChange:this.handlePlayerNameChange})),r.a.createElement(g.b,null,r.a.createElement(d.a,{disabled:o,color:"primary",size:"large",variant:"extendedFab",onClick:this.handleLogin},l.a.get("online.login"))))}}]),a}(t.Component),R=a(351),L=a(352),x=a(349),j=a(436),O=a.n(j).a,I=a(61),N=a(437),P=a.n(N).a,J=a(438),F=a.n(J).a,S=a(85),_=function(e){return r.a.createElement(S.a,Object.assign({viewBox:"0 0 455.431 455.431",style:{enableBackground:"new 0 0 455.431 455.431"}},e),r.a.createElement("path",{style:{fill:"#E08826"},d:"M405.493,412.764c-69.689,56.889-287.289,56.889-355.556,0c-69.689-56.889-62.578-300.089,0-364.089 s292.978-64,355.556,0S475.182,355.876,405.493,412.764z"}),r.a.createElement("path",{style:{fill:"#F29A2F"},d:"M229.138,313.209c-62.578,49.778-132.267,75.378-197.689,76.8 c-48.356-82.489-38.4-283.022,18.489-341.333c51.2-52.622,211.911-62.578,304.356-29.867 C377.049,112.676,330.116,232.142,229.138,313.209z"}),r.a.createElement("g",null,r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M163.716,250.631l39.822-99.556h38.4L179.36,307.52h-29.867l-64-156.444h38.4L163.716,250.631z"}),r.a.createElement("path",{style:{fill:"#FFFFFF"},d:"M293.138,182.364c-2.844,2.844-5.689,7.111-5.689,11.378c0,4.267,1.422,8.533,5.689,11.378 c4.267,2.844,14.222,5.689,28.444,9.956c14.222,4.267,27.022,8.533,34.133,17.067c8.533,7.111,12.8,18.489,12.8,31.289 c0,14.222-5.689,25.6-15.644,34.133c-9.956,8.533-24.178,12.8-41.244,12.8c-24.178,0-46.933-8.533-66.844-27.022l21.333-25.6 c17.067,14.222,32.711,22.756,46.933,22.756c7.111,0,11.378-1.422,15.644-4.267c4.267-2.844,5.689-7.111,5.689-11.378 s-1.422-8.533-5.689-11.378c-4.267-2.844-11.378-5.689-22.756-8.533c-18.489-4.267-31.289-9.956-39.822-17.067 c-8.533-7.111-12.8-18.489-12.8-32.711s5.689-25.6,15.644-34.133s24.178-11.378,39.822-11.378c9.956,0,21.333,1.422,31.289,5.689 c9.956,4.267,19.911,8.533,27.022,15.644l-17.067,25.6c-14.222-9.956-27.022-15.644-42.667-15.644 C301.671,178.098,297.404,179.52,293.138,182.364z"})))};function w(){var e=Object(f.a)(["\n  text-align: right;\n"]);return w=function(){return e},e}function A(){var e=Object(f.a)(["\n  text-align: left;\n"]);return A=function(){return e},e}function D(){var e=Object(f.a)(["\n  text-align: center;\n"]);return D=function(){return e},e}function M(){var e=Object(f.a)(["\n  margin-top: 4px;\n"]);return M=function(){return e},e}function G(){var e=Object(f.a)(["\n  && {\n    margin-left: 4px;\n  }\n"]);return G=function(){return e},e}var B=Object(y.c)(d.a)(G()),z=Object(y.c)(g.a)(M()),T=Object(y.c)(g.b)(D()),K=Object(y.c)(g.b)(A()),$=Object(y.c)(g.b)(w()),q=function(e,n){return e.find((function(e){return e.name===n}))},H=function(e){return e.find((function(e){return!e.name}))},Q=function(e){Object(u.a)(a,e);var n=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).handleJoinClick=function(){var n=e.props,a=n.roomId,t=n.players;e.props.onJoin(a,H(t).id)},e.handleLeaveClick=function(){e.props.onLeave(e.props.roomId)},e.handlePlayClick=function(){var n=e.props,a=n.roomId,t=n.players,r=n.playerName;e.props.onPlay(a,"".concat(q(t,r).id),t.length)},e.handleSpectateClick=function(){var n=e.props,a=n.roomId,t=n.players;e.props.onSpectate(a,t.length)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,n=e.name,a=e.playerName,t=e.players,o=e.alreadyJoined,i=q(t,a),c=H(t);return r.a.createElement(z,{alignItems:"center"},r.a.createElement(K,{flex:3},r.a.createElement(F,{label:n})),r.a.createElement($,{flex:2},t[0].name||"..."),r.a.createElement(T,{flex:2},r.a.createElement(I.a,{disabled:!0},r.a.createElement(_,null))),r.a.createElement(K,{flex:2},t[1].name||"..."),r.a.createElement($,{flex:3},i&&r.a.createElement(B,{variant:"outlined",onClick:this.handleLeaveClick},l.a.get("online.room_leave")),c&&!i&&!o&&r.a.createElement(B,{variant:"outlined",onClick:this.handleJoinClick},l.a.get("online.room_join")),!c&&i&&r.a.createElement(B,{variant:"outlined",onClick:this.handlePlayClick},l.a.get("online.room_play")),!c&&!i&&r.a.createElement(B,{variant:"outlined",onClick:this.handleSpectateClick},l.a.get("online.room_spectate"))))}}]),a}(t.Component),U=a(63);function V(){var e=Object(f.a)(["\n  max-width: 800px;\n  margin: 0 auto;\n"]);return V=function(){return e},e}var W=y.c.div(V()),X=function(e){Object(u.a)(a,e);var n=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).handleCreateRoomClick=function(){e.props.onCreate()},e.handleRefreshRooms=function(){e.props.onRefresh()},e.handleJoinRoomClick=function(n,a){e.props.onJoin(n,a)},e.handleLeaveRoomClick=function(n){e.props.onLeave(n)},e.handlePlayClick=function(n,a,t){e.props.onPlay(n,a,t)},e.handleSpectateClick=function(n,a){e.props.onSpectate(n,a)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,n=this.props,a=n.gameInstances,o=n.playerName,i=n.alreadyJoined;return r.a.createElement(W,null,r.a.createElement(R.a,null,r.a.createElement(x.a,{title:l.a.get("online.rooms_title"),subheader:l.a.get("online.rooms_subtitle"),action:r.a.createElement(t.Fragment,null,r.a.createElement(U.a,{title:l.a.get("online.new_room")},r.a.createElement(I.a,{color:"primary",disabled:!Array.isArray(a)||a.length>4,onClick:this.handleCreateRoomClick},r.a.createElement(O,null))),r.a.createElement(U.a,{title:l.a.get("online.refresh")},r.a.createElement(I.a,{color:"primary",onClick:this.handleRefreshRooms},r.a.createElement(P,null))))}),r.a.createElement(L.a,null,Array.isArray(a)&&a.map((function(n){return r.a.createElement(Q,{key:"game-".concat(n.gameID),name:"Territories ".concat(n.gameID.substring(0,3)),roomId:n.gameID,players:n.players,playerName:o,alreadyJoined:i,onJoin:e.handleJoinRoomClick,onLeave:e.handleLeaveRoomClick,onPlay:e.handlePlayClick,onSpectate:e.handleSpectateClick})})))))}}]),a}(t.Component),Y=a(442),Z=a.n(Y).a;function ee(){var e=Object(f.a)(["\n  max-width: 800px;\n  margin: 0 auto;\n"]);return ee=function(){return e},e}var ne=y.c.div(ee()),ae=function(e){var n=e.exitButtonLabel,a=e.playerName,t=e.onExit;return r.a.createElement(ne,null,r.a.createElement(g.a,{alignItems:"center",spaceBetween:!0},r.a.createElement(g.b,null,r.a.createElement("h2",null,l.a.get("online.hello",{name:a}))),r.a.createElement(g.b,null,r.a.createElement(U.a,{title:n},r.a.createElement(I.a,{onClick:t},r.a.createElement(Z,null))))))},te=function(e){return e.gameComponents[0].game.name},re=function(e){var n=[];return Array.isArray(e.gameInstances)?(e.gameInstances.forEach((function(e){e.players.forEach((function(e){e.name&&n.push(e.name)}))})),n):n},oe=function(e){Object(u.a)(a,e);var n=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).handleLoginClick=function(n){e.props.onEnterLobby(n)},e.handleLogoutClick=function(){var n=e.props,a=n.gameInstances,t=n.playerName;(Array.isArray(a)?a.filter((function(e){return e.players.some((function(e){return e.name===t}))})):[]).forEach((function(n){return e.handleLeaveRoomClick(n.gameID)})),e.props.onExitLobby()},e.handleCreateRoomClick=function(){e.props.onCreateRoom(te(e.props),2)},e.handleRefreshRoomsClick=function(){e.props.onRefreshRooms()},e.handleJoinRoomClick=function(n,a){e.props.onJoinRoom(te(e.props),n,a)},e.handleLeaveRoomClick=function(n){e.props.onLeaveRoom(te(e.props),n)},e.handlePlayClick=function(n,a,t){e.props.onStartGame(te(e.props),{gameID:n,playerID:a,numPlayers:t})},e.handleSpectateClick=function(n,a){e.props.onStartGame(te(e.props),{gameID:n,numPlayers:a})},e.handleExitRoomClick=function(){e.props.onExitRoom()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){setInterval(this.handleRefreshRoomsClick,15e3)}},{key:"render",value:function(){var e=this.props,n=e.errorMsg,a=e.phase,o=e.playerName,i=e.gameInstances,c=e.runningGame;return n?r.a.createElement(h.a,null,l.a.get("error"),": ",n):"enter"===a?r.a.createElement(k,{playerName:o,playersNames:re(this.props),onLogin:this.handleLoginClick}):"list"===a?r.a.createElement(t.Fragment,null,r.a.createElement(ae,{exitButtonLabel:l.a.get("online.logout"),playerName:o,onExit:this.handleLogoutClick}),r.a.createElement(X,{gameInstances:i,playerName:o,alreadyJoined:re(this.props).includes(o),onCreate:this.handleCreateRoomClick,onRefresh:this.handleRefreshRoomsClick,onJoin:this.handleJoinRoomClick,onLeave:this.handleLeaveRoomClick,onPlay:this.handlePlayClick,onSpectate:this.handleSpectateClick,onLogout:this.handleLogoutClick})):"play"===a?r.a.createElement(t.Fragment,null,r.a.createElement(ae,{exitButtonLabel:l.a.get("online.exit"),playerName:o,onExit:this.handleExitRoomClick}),c&&r.a.createElement(c.app,{gameID:c.gameID,playerID:c.playerID,credentials:c.credentials})):"Phase is unknown..."}}]),a}(t.Component),le=a(329);n.default=function(){return r.a.createElement(c.Lobby,{gameServer:"https://territories-backend.herokuapp.com",lobbyServer:"https://territories-backend.herokuapp.com",gameComponents:[{game:i.Game,board:le.a,loading:function(){return r.a.createElement("div",null,l.a.get("online.connecting"))}}],renderer:function(e){var n=e.errorMsg,a=e.gameComponents,t=e.gameInstances,o=e.phase,l=e.playerName,i=e.runningGame,c=e.handleEnterLobby,m=e.handleExitLobby,s=e.handleCreateRoom,u=e.handleJoinRoom,p=e.handleLeaveRoom,h=e.handleExitRoom,d=e.handleRefreshRooms,g=e.handleStartGame;return r.a.createElement(oe,{errorMsg:n,gameComponents:a,gameInstances:t,phase:o,playerName:l,runningGame:i,onEnterLobby:c,onExitLobby:m,onCreateRoom:s,onJoinRoom:u,onLeaveRoom:p,onExitRoom:h,onRefreshRooms:d,onStartGame:g})}})}}}]);
//# sourceMappingURL=8.2ef786f0.chunk.js.map